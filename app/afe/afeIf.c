/*
 * @file afeIf.c
 *
 */

#ifdef SOC_CPU1
//=============================================================================
/*-------------------------------- Includes ---------------------------------*/
//=============================================================================
#include "afeIf.h"

#include "rp.h"

#include "afe.h"
//=============================================================================

//=============================================================================
/*------------------------------- Definitions -------------------------------*/
//=============================================================================
typedef struct{

	rphandle_t cmdHandle[AFE_IF_END];
	rpctx_t rp;
}afeIfControl_t;

//=============================================================================

//=============================================================================
/*--------------------------------- Globals ---------------------------------*/
//=============================================================================
afeIfControl_t xafeIfControl;
//=============================================================================

//=============================================================================
/*-------------------------------- Prototypes -------------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
static void afeIfRpInit(void);
//-----------------------------------------------------------------------------
static int32_t afeIfCmdBlink(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize);
//-----------------------------------------------------------------------------
static int32_t afeIfCmdAdcEn(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize);
//-----------------------------------------------------------------------------
static int32_t afeIfCmdAdcConfig(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize);
//-----------------------------------------------------------------------------
static int32_t afeIfCmdPwmConfig(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize);
//-----------------------------------------------------------------------------
//=============================================================================

//=============================================================================
/*-------------------------------- Functions --------------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
void afeIfInitialize(void){

	afeIfRpInit();
}
//-----------------------------------------------------------------------------
int32_t afeIf(void *in, uint32_t insize, void **out, uint32_t maxoutsize){

	return rpRequest(&xafeIfControl.rp, in, insize, out, maxoutsize);
}
//-----------------------------------------------------------------------------
//=============================================================================

//=============================================================================
/*---------------------------- Static functions -----------------------------*/
//=============================================================================
//-----------------------------------------------------------------------------
static void afeIfRpInit(void){

	rpInitialize(&xafeIfControl.rp, AFE_IF_END, xafeIfControl.cmdHandle);

	rpRegisterHandle(&xafeIfControl.rp, AFE_IF_BLINK, afeIfCmdBlink);
	rpRegisterHandle(&xafeIfControl.rp, AFE_IF_ADC_EN, afeIfCmdAdcEn);
	rpRegisterHandle(&xafeIfControl.rp, AFE_IF_ADC_CONFIG, afeIfCmdAdcConfig);
	rpRegisterHandle(&xafeIfControl.rp, AFE_IF_PWM_CONFIG, afeIfCmdPwmConfig);
}
//-----------------------------------------------------------------------------
static int32_t afeIfCmdBlink(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize){

	return 0;
}
//-----------------------------------------------------------------------------
static int32_t afeIfCmdAdcEn(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize){

	uint32_t enable = *( (uint32_t *) in );

	afeAdcEnable(enable);

	return 0;
}
//-----------------------------------------------------------------------------
static int32_t afeIfCmdAdcConfig(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize){

	afeAdcConfig(in);

	return 0;
}
//-----------------------------------------------------------------------------
static int32_t afeIfCmdPwmConfig(void *in, rpuint_t insize, void **out, rpuint_t maxoutsize){

	afePwmConfig(in);

	return 0;
}
//-----------------------------------------------------------------------------
//=============================================================================

#endif /* SOC_CPU1 */

