/*
 * soc_trace_mem.c
 *
 *  Created on: 21 de ago de 2022
 *      Author: marco
 */

//===========================================================================
/*------------------------------- Includes --------------------------------*/
//===========================================================================
#include "soc_trace_mem.h"
//===========================================================================

//===========================================================================
/*------------------------------- Functions -------------------------------*/
//===========================================================================
//---------------------------------------------------------------------------
void soctracememInitialize(soctracemem_t *trace, uint32_t *mem, uint32_t size){

	trace->start = mem;
	trace->end = mem + size;
	trace->p = mem;
}
//---------------------------------------------------------------------------
void soctracememSetSize(soctracemem_t *trace, uint32_t size){

	trace->end = trace->start + size;
	trace->p = trace->start;
}
//---------------------------------------------------------------------------
void soctracememSave(soctracemem_t *trace, uint32_t **src, uint32_t size){

	if( (trace->p + size) >= trace->end ) return;

	while(size--){
		*trace->p++ = **src++;
	}
}
//---------------------------------------------------------------------------
void soctracememReset(soctracemem_t *trace){

	trace->p = trace->start;
}
//---------------------------------------------------------------------------
//===========================================================================
